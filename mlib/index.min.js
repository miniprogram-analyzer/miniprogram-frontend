function JumpIndexColumn(n){var t=(n==="mindex"?"/":"/mobile/")+n+".html";JumpIndexHistory!==t&&(JumpIndexHistory=t,window.location.href=t)}function NewsListAppend(n){var t,i,r;pageType=window.localStorage.getItem("PageBsType");(pageType===null||pageType===""||$.type(pageType)==="undefined")&&(pageType="blog");switch(pageType){case"b-speedy":for(t in n){if(maxTimeSpan=DataTimeToLocalTime(n[t].orderdate).getTime(),window.sessionStorage.setItem("NewsCommentCount_"+n[t].newsid,n[t].commentcount),n[t].imagelist!==null&&n[t].imagelist.length>=3){i='<div class="placeholder three-img-plc" data-news-id="'+n[t].newsid+'" data-order-date="'+ParseDateFmt(n[t].orderdate)+'" data-news-comment-count="'+n[t].commentcount+'"><a href="'+n[t].WapNewsUrl+'" role="option" target="_blank"><p class="title">'+n[t].title+'<\/p><p class="plc-footer"><span class="post-time">'+n[t].PostDateStr+"<\/span>";for(r in n[t].NewsTips)i+='<span class="tip '+n[t].NewsTips[r].TipClass+'">'+n[t].NewsTips[r].TipName+"<\/span>";i+=(n[t].HideCount?"":'<span class="plc-footer-fr">'+(n[t].HitCountStr!==""&&n[t].HitCountStr!==null?'<span class="hit-count">'+n[t].HitCountStr+"阅<\/span>":"")+'<span class="review-num">'+n[t].commentcount+"评<\/span><\/span>")+'<\/p><div class="pic-space"><div class="plc-image"><img data-original="'+n[t].imagelist[0]+'" onerror="this.src=\'//img.ithome.com/images/v2/t.png\'" /><\/div><div class="plc-image"><img data-original="'+n[t].imagelist[1]+'" onerror="this.src=\'//img.ithome.com/images/v2/t.png\'" /><\/div><div class="plc-image"><img data-original="'+n[t].imagelist[2]+'" onerror="this.src=\'//img.ithome.com/images/v2/t.png\'" /><\/div><\/div><\/div><\/a><\/div>'}else if(n[t].image!==undefined&&n[t].image!==null&&n[t].image!==""){i='<div class="placeholder one-img-plc" data-news-id="'+n[t].newsid+'" data-order-date="'+ParseDateFmt(n[t].orderdate)+'" data-news-comment-count="'+n[t].commentcount+'"><a href="'+n[t].WapNewsUrl+'" role="option" target="_blank"><div class="plc-image"><img data-original="'+n[t].image+'" onerror="this.src=\'//img.ithome.com/images/v2/t.png\'" />'+(n[t].isad?'<span class="tip-suggest">广告<\/span>':"")+'<\/div><div class="plc-con"><p class="plc-title">'+n[t].title+'<\/p><p class="plc-footer"><span class="post-time">'+n[t].PostDateStr+"<\/span>";for(r in n[t].NewsTips)i+='<span class="tip '+n[t].NewsTips[r].TipClass+'">'+n[t].NewsTips[r].TipName+"<\/span>";i+=(n[t].HideCount?"":'<span class="plc-footer-fr">'+(n[t].HitCountStr!==""&&n[t].HitCountStr!==null?'<span class="hit-count">'+n[t].HitCountStr+"阅<\/span>":"")+'<span class="review-num">'+n[t].commentcount+"评<\/span><\/span>")+"<\/p><\/div><\/a><\/div>"}else{i='<div class="placeholder no-img-plc" data-news-id="'+n[t].newsid+'" data-order-date="'+ParseDateFmt(n[t].orderdate)+'" data-news-comment-count="'+n[t].commentcount+'"><a href="'+n[t].WapNewsUrl+'" role="option" target="_blank"><div class="plc-con"><p class="plc-title">'+n[t].title+'<\/p><p class="plc-footer"><span class="post-time">'+n[t].PostDateStr+"<\/span>";for(r in n[t].NewsTips)i+='<span class="tip '+n[t].NewsTips[r].TipClass+'">'+n[t].NewsTips[r].TipName+"<\/span>";i+=(n[t].HideCount?"":'<span class="plc-footer-fr">'+(n[t].HitCountStr!==""&&n[t].HitCountStr!==null?'<span class="hit-count">'+n[t].HitCountStr+"阅<\/span>":"")+'<span class="review-num">'+n[t].commentcount+"评<\/span><\/span>")+"<\/p><\/div><\/a><\/div>"}$(".content").append(i)}break;default:for(t in n){if(maxTimeSpan=DataTimeToLocalTime(n[t].orderdate).getTime(),window.sessionStorage.setItem("NewsCommentCount_"+n[t].newsid,n[t].commentcount),n[t].imagelist!==null&&n[t].imagelist.length>=3){i='<div class="placeholder three-img-plc" data-news-id="'+n[t].newsid+'" data-order-date="'+ParseDateFmt(n[t].orderdate)+'" data-news-comment-count="'+n[t].commentcount+'"><a href="'+n[t].WapNewsUrl+'" role="option" target="_blank"><p class="title">'+n[t].title+'<\/p><p class="plc-footer"><span class="post-time">'+n[t].PostDateStr+"<\/span>";for(r in n[t].NewsTips)i+='<span class="tip '+n[t].NewsTips[r].TipClass+'">'+n[t].NewsTips[r].TipName+"<\/span>";i+=(n[t].HideCount?"":'<span class="plc-footer-fr">'+(n[t].HitCountStr!==""&&n[t].HitCountStr!==null?'<span class="hit-count">'+n[t].HitCountStr+"阅<\/span>":"")+'<span class="review-num">'+n[t].commentcount+"评<\/span><\/span>")+'<\/p><div class="pic-space"><div class="plc-image"><img src="'+n[t].imagelist[0]+'" onerror="this.src=\'//img.ithome.com/images/v2/t.png\'" /><\/div><div class="plc-image"><img src="'+n[t].imagelist[1]+'" onerror="this.src=\'//img.ithome.com/images/v2/t.png\'" /><\/div><div class="plc-image"><img src="'+n[t].imagelist[2]+'" onerror="this.src=\'//img.ithome.com/images/v2/t.png\'" /><\/div><\/div><\/div><\/a><\/div>'}else if(n[t].image!==undefined&&n[t].image!==null&&n[t].image!==""){i='<div class="placeholder one-img-plc" data-news-id="'+n[t].newsid+'" data-order-date="'+ParseDateFmt(n[t].orderdate)+'" data-news-comment-count="'+n[t].commentcount+'"><a href="'+n[t].WapNewsUrl+'" role="option" target="_blank"><div class="plc-image"><img src="'+n[t].image+'" onerror="this.src=\'//img.ithome.com/images/v2/t.png\'" />'+(n[t].isad?'<span class="tip-suggest">广告<\/span>':"")+'<\/div><div class="plc-con"><p class="plc-title">'+n[t].title+'<\/p><p class="plc-footer"><span class="post-time">'+n[t].PostDateStr+"<\/span>";for(r in n[t].NewsTips)i+='<span class="tip '+n[t].NewsTips[r].TipClass+'">'+n[t].NewsTips[r].TipName+"<\/span>";i+=(n[t].HideCount?"":'<span class="plc-footer-fr">'+(n[t].HitCountStr!==""&&n[t].HitCountStr!==null?'<span class="hit-count">'+n[t].HitCountStr+"阅<\/span>":"")+'<span class="review-num">'+n[t].commentcount+"评<\/span><\/span>")+"<\/p><\/div><\/a><\/div>"}else{i='<div class="placeholder no-img-plc" data-news-id="'+n[t].newsid+'" data-order-date="'+ParseDateFmt(n[t].orderdate)+'" data-news-comment-count="'+n[t].commentcount+'"><a href="'+n[t].WapNewsUrl+'" role="option" target="_blank"><div class="plc-con"><p class="plc-title">'+n[t].title+'<\/p><p class="plc-footer"><span class="post-time">'+n[t].PostDateStr+"<\/span>";for(r in n[t].NewsTips)i+='<span class="tip '+n[t].NewsTips[r].TipClass+'">'+n[t].NewsTips[r].TipName+"<\/span>";i+=(n[t].HideCount?"":'<span class="plc-footer-fr">'+(n[t].HitCountStr!==""&&n[t].HitCountStr!==null?'<span class="hit-count">'+n[t].HitCountStr+"阅<\/span>":"")+'<span class="review-num">'+n[t].commentcount+"评<\/span><\/span>")+"<\/p><\/div><\/a><\/div>"}$(".content").append(i)}}}function NewsHitCountGet(){if(GetHitCountAuthority()){var n="";$(".placeholder").each(function(){var t=$(this).attr("data-news-id");$.type(t)!=="undefined"&&t!==""&&t!==null&&(n+=t+"|")});n!==""&&$.ajax({type:"get",url:Api.News.NewsHitCountGet,data:{NewsIDs:n},dataType:"json",success:function(n){if(n.Success===1){n=n.Result;for(var t in n)$(".placeholder[data-news-id="+t+"] .plc-footer .plc-footer-fr").prepend('<span class="hit-count">'+n[t]+"阅<\/span>")}},error:function(){return""}})}}function GetSupportComment(){var n=localStorage.getItem("SupportCommentList");return(n===""||n===null)&&(n=""),n}function GetOpposetComment(){var n=localStorage.getItem("OpposetCommentList");return(n===""||n===null)&&(n=""),n}function SetSupportComment(n,t){var i=GetSupportComment();t?i.indexOf(n)===-1&&(i+="|"+n):i.indexOf(n)!==-1&&(i=i.replace("|"+n,""));localStorage.setItem("SupportCommentList",i)}function SetOpposetComment(n,t){var i=GetOpposetComment();t?i.indexOf(n)===-1&&(i+="|"+n):i.indexOf(n)!==-1&&(i=i.replace("|"+n,""));localStorage.setItem("OpposetCommentList",i)}function CommentVoteView(){var n=GetSupportComment(),t=GetOpposetComment();$(".join-hot-comment .jhc-item").each(function(){var i,r;n.indexOf($(this).attr("data-comment-id"))!==-1&&(i=$(this).find(".stand-by").text(),$(this).find(".stand-by").text(i.replace("支持","取消")));t.indexOf($(this).attr("data-comment-id"))!==-1&&(r=$(this).find(".oppose").text(),$(this).find(".oppose").text(r.replace("反对","取消")))})}function CommentVote(n,t,i){if(noCommentVote)return"";noCommentVote=!0;$.ajax({type:"post",url:Api.Comment.CommentVote,data:{CommentID:t,TypeID:n},dataType:"json",success:function(n){n!==null&&n!==""&&(n.Success===1?i.hasClass("stand-by")?(i.text("取消("+n.Result+")"),SetSupportComment(t,!0)):i.hasClass("oppose")&&(i.text("取消("+n.Result+")"),SetOpposetComment(t,!0)):n.Result==="needLogin"?LoginWindow():n.Result!==""&&layer.open({title:"提示",content:n.Result}));noCommentVote=!1},error:function(){return noCommentVote=!1,""}})}function CommentCancelVote(n,t,i){if(noCommentCancelVote)return"";noCommentCancelVote=!0;$.ajax({type:"post",url:Api.Comment.CommentCancelVote,data:{CommentID:t,TypeID:n},dataType:"json",success:function(n){if(n!==null&&n!=="")if(n.Success===1){var r=i.text();i.hasClass("stand-by")?(SetSupportComment(t,!1),i.text("支持("+n.Result+")")):i.hasClass("oppose")&&(SetOpposetComment(t,!1),i.text("反对("+n.Result+")"))}else n.Result==="needLogin"?LoginWindow():n.Result!==""&&layer.open({title:"提示",content:n.Result});noCommentCancelVote=!1},error:function(){return noCommentCancelVote=!1,""}})}function UserColumnsAdd(n){var t=0;""!==tag?$(".hd-tab .swiper-container .swiper-wrapper .swiper-slide").each((function(n){$(this).attr("data-tag")===tag&&($(this).addClass("active"),t=n)})):$(".hd-tab .swiper-container .swiper-wrapper .swiper-slide").eq(0).addClass("active"),t=t>=3?t-2:0,n.slideTo(t,0,!1);}var tag=$("#page-data").attr("data-tag"),newsTag,JumpIndexHistory,noCommentVote,noCommentCancelVote;tag=tag===""||tag===null?"":tag.replace("/","");newsTag=$("#page-data").attr("data-news-tag");(newsTag===""||newsTag===null||$.type(newsTag)==="undefined")&&(newsTag="");var maxTimeSpan="",maxSupport=$(".join-hot-comment .jhc-fr .review-footer .review-ft-fr .stand-by:last").attr("data-support"),minRank=parseInt($(".join-hot-comment .jhc-fl:last").text()),pageType=window.localStorage.getItem("PageBsType");(pageType===null||pageType===""||$.type(pageType)==="undefined")&&(pageType="blog");var upflag=!0,downflag=!0,loadNews=!1,loadtcNews=!1,loadtcNewsPage=0,loadHotComment=!1;noCommentVote=!1;noCommentCancelVote=!1;$(function(){var t,r,f,n,u,i;userInfo!==null&&userInfo.NoComment&&$(".head .tab .hd-tab .swiper-container .swiper-wrapper div[data-tag='hotcommentm']").remove();$(".head .tab .hd-tab .swiper-container .swiper-wrapper div").addClass("swiper-slide").attr("role","menuitem");$(".head .tab .hd-tab .swiper-container").removeClass("hide");$(".head .tab .hd-tab").css({height:"initial"});$(".head .tab .hd-tab .swiper-container .swiper-wrapper div").length>0&&(t='<div class="edit-tab"><div class="my-tab"><div class="my-hd"><span class="my-hd-title">网站导航<\/span><span class="my-tag">（点击进入相应栏目）<\/span><button class="arrow"><\/button><\/div><div class="my-tab-box">',$(".head .tab .hd-tab .swiper-container .swiper-wrapper div").each(function(){t+='<button data-tag="'+$(this).attr("data-tag")+'">'+$(this).text()+"<\/button>"}),t+="<\/div><\/div><\/div>",$(".head .tab .tab-box").append(t));maxTimeSpan=$(".content .placeholder:last").attr("data-order-date");maxTimeSpan!==null&&maxTimeSpan!==""&&$.type(maxTimeSpan)!=="undefined"&&(maxTimeSpan=DataTimeToLocalTime(maxTimeSpan).getTime());$(".content").length>0&&$(".news-tc").length>0?(loadtcNews=!0,loadNews=!0,$(".head .hd").addClass("shadow")):$(".content").length>0&&(loadNews=!0);$(".join-hot-comment").length>0&&(loadHotComment=!0,$("body").hasClass("b-speedy")&&setTimeout(function(){LazyLoadConfigSet()},370));switch(pageType){case"b-speedy":break;case"blog":$(".banner .swiper-wrapper .swiper-lazy-bs").addClass("swiper-lazy");break;default:$(".banner .swiper-wrapper .swiper-lazy-bs").addClass("swiper-lazy")}$(".head .hd-tab .swiper-container").length>0&&(r=new Swiper(".head .hd-tab .swiper-container",{freeMode:!0,freeModeMomentumBounce:!1,grabCursor:!0,autoplay:!1,preloadImages:!1,slidesPerView:"auto",loop:!1,roundLengths:!0,slideToClickedSlide:!1,slidesOffsetAfter:70,centeredSlides:!1}),UserColumnsAdd(r));$(".banner .banner-swiper-container").length>0&&(f=new Swiper(".banner .banner-swiper-container",{autoplay:!0,delay:4e3,preloadImages:!0,slidesPerView:1,grabCursor:!0,spaceBetween:1,loop:!0,loopedSlides:$(".banner .swiper-wrapper .swiper-slide").length,roundLengths:!0,lazy:{loadPrevNext:!0,elementClass:"swiper-lazy"},pagination:{el:".banner .swiper-pagination",type:"bullets",clickable:!0},on:{init:function(){$(".banner .swiper-wrapper img").removeClass("hide")}}}));NewsHitCountGet();$(document).on("click",".hd-tab .swiper-container .swiper-wrapper div,.edit-tab .my-tab-box button",function(){tag=$(this).attr("data-tag");(tag===""||tag===null)&&(tag="");JumpIndexColumn(tag)});n=!1;$(window).scroll(function(){var t=$(".head .hd").css("height"),i;t=parseInt(t.substr(0,t.length-2));$(".open-app-banner").length===1&&(i=$(".open-app-banner").css("height"),i=parseInt(i.substr(0,i.length-2)),t+=i);(document.documentElement.scrollTop||document.body.scrollTop)>t?n||($(".tab-box").addClass("fixed"),$(".head .tab").css("height",$(".head .tab .tab-box").css("height")),$(".open-app-banner").hide(),$(".fixed-btn").show(),$(".head .tab .tab-box").addClass("shadow"),n=!0):n&&($(".tab-box").removeClass("fixed"),$(".open-app-banner").show(),$(".fixed-btn").hide(),$(".head .tab .tab-box").removeClass("shadow"),n=!1)});$(".edit-tab").css("height",$(window).height()+123+"px");$(document).on("click",".hd-tab .arrow",function(){$(".edit-tab").show();$(".hd-tab").hide();$(".rank-tab").hide();$(".head .tab").css("height",$(".head .tab .tab-box").css("height"))});$(document).on("click",".edit-tab .arrow",function(){$(".edit-tab").hide();$(".hd-tab").show();$(".rank-tab").show();$(".head .tab").css("height",$(".head .tab .tab-box").css("height"))});$(document).on("click",".open-app-a",function(n){OpenIthomeAppByA("index","",n)});$(document).on("click",".join-hot-comment .jhc-fr .review-footer .comment-share",function(){NShareSet("",Domain.WapHtmlDomain+"/"+$(this).parents(".jhc-fr").find(".jhc-content").attr("data-news-id")+".htm","IT之家用户["+$.trim($(this).parents(".jhc-fr").find(".user-name").text())+"]的评论",$.trim($(this).parents(".jhc-fr").find(".user-name").text())+"："+$.trim($(this).parents(".jhc-fr").find(".jhc-content").text()),"@IT之家");NShareCall()});$(document).on("click",".join-hot-comment .jhc-item .review-footer .stand-by",function(){var t=$(this).parents(".jhc-item").attr("data-comment-id"),n=$(this);n.text().indexOf("取消")!==-1?CommentCancelVote(1,t,n):CommentVote(1,t,n)});$(document).on("click",".join-hot-comment .jhc-item .review-footer .oppose",function(){var t=$(this).parents(".jhc-item").attr("data-comment-id"),n=$(this);n.text().indexOf("取消")!==-1?CommentCancelVote(0,t,n):CommentVote(0,t,n)});$(document).on("click",".open-app-banner .op .close-btn",function(){$(".open-app-banner").remove();var n=new Date,t={Hidden:!0,ExpirationTime:n.setDate(n.getDate()+7)};});if($(".head .tab .tab-box .rank-tab").length>0&&$(".rank").length>0){u=new Swiper(".head .tab-box .rank-tab .rank-swiper-container",{grabCursor:!0,freeMode:!0,autoplay:!1,uniqueNavElements:!1,preloadImages:!1,slidesPerView:"auto",loop:!1,roundLengths:!0,slideToClickedSlide:!1,centeredSlides:!1});$(document).on("click",".head .tab-box .rank-tab .rank-swiper-container .swiper-slide",function(){var t=$(".rank .rank-name[data-rank-type="+$(this).attr("data-rank-type")+"]").offset().top,n=$(".head .tab-box").css("height");n=parseInt(n.substr(0,n.length-2));$("html,body").stop(!0,!0).animate({scrollTop:t-n-15},370)});i=0;$(window).scroll(function(){var t=$(document).scrollTop(),r=$(".rank .rank-name"),n=$(".head .tab-box").css("height");n=parseInt(n.substr(0,n.length-2));r.each(function(r){t>$(this).offset().top-n-17&&(r>=1&&i!==r&&(i=r,u.slideTo(r-1,0,!1)),$(".head .tab-box .rank-tab .rank-swiper-container .swiper-slide").eq(r).addClass("active").siblings().removeClass("active"))})})}});